use clap::Parser;
use clap::Subcommand;

use crate::config::Config;

#[derive(Debug, Subcommand, Clone)]
pub enum NodeModulesCommandType {
  /// Link a specified version of Atlaspack into node_modules
  Link,
  /// Scans node_modules recursively for all instances of Atlaspack
  Scan,
  /// Traverse node_modules recursively and ensure only one version of Atlaspack is installed
  Dedupe,
}

#[derive(Debug, Parser)]
pub struct NodeModulesCommand {
  #[clap(subcommand)]
  pub command: Option<NodeModulesCommandType>,
}

pub async fn main(
  _config: Config,
  cmd: NodeModulesCommand,
) -> anyhow::Result<()> {
  dbg!(&cmd);
  Ok(())
}
