use clap::Parser;

use crate::config::Config;
use crate::platform::active::ActivePackage;
use crate::platform::origin::InstallOrigin;

#[derive(Debug, Parser, Clone)]
pub struct NodeModulesLinkCommand {
  /// Target version to install
  pub version: Option<String>,

  #[arg(short = 'o', long = "origin")]
  pub origin: Option<InstallOrigin>,
}

pub async fn node_modules_link(
  config: Config,
  cmd: NodeModulesLinkCommand,
) -> anyhow::Result<()> {
  match cmd.origin {
    Some(version) => {
      println!("{}", version)
    }
    None => {
      let active = ActivePackage::try_active_or_global(&config)?;
    }
  };

  // dbg!(&active);
  Ok(())
}
